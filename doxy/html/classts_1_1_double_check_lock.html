<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TSDuck: ts::DoubleCheckLock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxy-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img src="tsduck-32.png"/></td>
   <td id="projectalign"><span id="projectname">TSDuck</span>
    <span id="projectnumber">Version 3.9-581</span>
    <span id="projectbrief">(TSDuck - The MPEG Transport Stream Toolkit)</span>
   </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classts_1_1_double_check_lock.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classts_1_1_double_check_lock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ts::DoubleCheckLock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The class <a class="el" href="classts_1_1_double_check_lock.html" title="The class DoubleCheckLock implements the double check locking design pattern. ">DoubleCheckLock</a> implements the <em>double check locking</em> design pattern.  
 <a href="classts_1_1_double_check_lock.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_double_check_lock_1_1_reader.html">Reader</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classts_1_1_guard.html" title="Automatic guard class for mutex (ts::MutexInterface). ">Guard</a> class for the reader thread.  <a href="classts_1_1_double_check_lock_1_1_reader.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_double_check_lock_1_1_writer.html">Writer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classts_1_1_guard.html" title="Automatic guard class for mutex (ts::MutexInterface). ">Guard</a> class for writer threads.  <a href="classts_1_1_double_check_lock_1_1_writer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aed05ca9d9221ef59e074ce0304cb804d"><td class="memItemLeft" align="right" valign="top"><a id="aed05ca9d9221ef59e074ce0304cb804d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_double_check_lock.html#aed05ca9d9221ef59e074ce0304cb804d">DoubleCheckLock</a> ()</td></tr>
<tr class="memdesc:aed05ca9d9221ef59e074ce0304cb804d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:aed05ca9d9221ef59e074ce0304cb804d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc5b4d225ec9ab105a82e4812e78bfa7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_double_check_lock.html#adc5b4d225ec9ab105a82e4812e78bfa7">changed</a> () const</td></tr>
<tr class="memdesc:adc5b4d225ec9ab105a82e4812e78bfa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the shared data have been marked as "changed".  <a href="#adc5b4d225ec9ab105a82e4812e78bfa7">More...</a><br /></td></tr>
<tr class="separator:adc5b4d225ec9ab105a82e4812e78bfa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The class <a class="el" href="classts_1_1_double_check_lock.html" title="The class DoubleCheckLock implements the double check locking design pattern. ">DoubleCheckLock</a> implements the <em>double check locking</em> design pattern. </p>
<p>The <em>double check locking</em> design pattern is used to protect shared data with the following characteristics:</p>
<ul>
<li>One single reader thread.</li>
<li>The data are frequently read.</li>
<li>One (or more) writer thread.</li>
<li>The data are much less frequently written that read.</li>
</ul>
<p>The idea is that the reader thread uses its own private copy of the protected data and uses it without locking. At predefined points, the reader checks if the data have changed. When this is the case, a new copy is fetched under the protection of a mutex.</p>
<p>The writer threads always update the data under the protection of the mutex.</p>
<p>This method is slightly more complicated than using a mutex for each shared data access sequence but it significantly reduces the synchronization overhead, provided that the above conditions are met.</p>
<p>The following is a usage template.</p>
<h3>Shared data</h3>
<div class="fragment"><div class="line">SomeDataType data;           <span class="comment">// the data to protect</span></div><div class="line"><a class="code" href="classts_1_1_double_check_lock.html">ts::DoubleCheckLock</a> lock;  <span class="comment">// associated lock</span></div></div><!-- fragment --><h3><a class="el" href="classts_1_1_double_check_lock_1_1_writer.html" title="Guard class for writer threads. ">Writer</a> threads (not so often)</h3>
<div class="fragment"><div class="line">{</div><div class="line">    <span class="comment">// Acquire lock as writer</span></div><div class="line">    <a class="code" href="classts_1_1_double_check_lock_1_1_writer.html">ts::DoubleCheckLock::Writer</a> guard(lock);</div><div class="line"></div><div class="line">    <span class="comment">// Modify data</span></div><div class="line">    data = ....</div><div class="line">}</div></div><!-- fragment --><h3><a class="el" href="classts_1_1_double_check_lock_1_1_reader.html" title="Guard class for the reader thread. ">Reader</a> thread</h3>
<div class="fragment"><div class="line">SomeDataType copy;   <span class="comment">// Private copy of data (or part of it)</span></div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (lock.<a class="code" href="classts_1_1_double_check_lock.html#adc5b4d225ec9ab105a82e4812e78bfa7">changed</a>()) {</div><div class="line">    <span class="comment">// Acquire lock as reader</span></div><div class="line">    <a class="code" href="classts_1_1_double_check_lock_1_1_reader.html">ts::DoubleCheckLock::Reader</a> guard(lock);</div><div class="line"></div><div class="line">    <span class="comment">// Get a copy of data</span></div><div class="line">    copy = data;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Then, use &quot;copy&quot; (private to reader thread) instead of &quot;data&quot;</span></div></div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="adc5b4d225ec9ab105a82e4812e78bfa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc5b4d225ec9ab105a82e4812e78bfa7">&#9670;&nbsp;</a></span>changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ts::DoubleCheckLock::changed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the shared data have been marked as "changed". </p>
<p>This method is invoked in the reader thread to check if the data have been modified by a writer thread.</p>
<dl class="section return"><dt>Returns</dt><dd>True if a writer thread has modified the data since the last time a <a class="el" href="classts_1_1_double_check_lock_1_1_reader.html" title="Guard class for the reader thread. ">DoubleCheckLock::Reader</a> has been used, false otherwise. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ts_double_check_lock_8h.html">tsDoubleCheckLock.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
</body>
</html>
