<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TSDuck: ts::Guard Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxy-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img src="tsduck-32.png"/></td>
   <td id="projectalign"><span id="projectname">TSDuck</span>
    <span id="projectnumber">Version 3.9-552</span>
    <span id="projectbrief">(TSDuck - The MPEG Transport Stream Toolkit)</span>
   </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classts_1_1_guard.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classts_1_1_guard-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ts::Guard Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Automatic guard class for mutex (<a class="el" href="classts_1_1_mutex_interface.html" title="Interface class for mutex objects. ">ts::MutexInterface</a>).  
 <a href="classts_1_1_guard.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ts::Guard:</div>
<div class="dyncontent">
<div class="center"><img src="classts_1_1_guard__inherit__graph.png" border="0" usemap="#ts_1_1_guard_inherit__map" alt="Inheritance graph"/></div>
<map name="ts_1_1_guard_inherit__map" id="ts_1_1_guard_inherit__map">
<area shape="rect" id="node2" href="classts_1_1_double_check_lock_1_1_reader.html" title="Guard class for the reader thread. " alt="" coords="5,80,164,121"/>
<area shape="rect" id="node3" href="classts_1_1_double_check_lock_1_1_writer.html" title="Guard class for writer threads. " alt="" coords="188,80,347,121"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_guard_1_1_guard_error.html">GuardError</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fatal low-level mutex guard error.  <a href="classts_1_1_guard_1_1_guard_error.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a806d3566ffd3aaae9b22e0be92551041"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_guard.html#a806d3566ffd3aaae9b22e0be92551041">Guard</a> (<a class="el" href="classts_1_1_mutex_interface.html">MutexInterface</a> &amp;mutex, <a class="el" href="namespacets.html#a2c690abc5d90fe5ba7c3ec0237afc348">MilliSecond</a> timeout=<a class="el" href="namespacets.html#a6b91ccf90475c62f610ea549f69d8544">Infinite</a>)</td></tr>
<tr class="memdesc:a806d3566ffd3aaae9b22e0be92551041"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor, automatically acquire the mutex with a timeout.  <a href="#a806d3566ffd3aaae9b22e0be92551041">More...</a><br /></td></tr>
<tr class="separator:a806d3566ffd3aaae9b22e0be92551041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a929b28bcd8908d3ab033d6358b8ca3"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_guard.html#a1a929b28bcd8908d3ab033d6358b8ca3">~Guard</a> ()</td></tr>
<tr class="memdesc:a1a929b28bcd8908d3ab033d6358b8ca3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, automatically release the mutex.  <a href="#a1a929b28bcd8908d3ab033d6358b8ca3">More...</a><br /></td></tr>
<tr class="separator:a1a929b28bcd8908d3ab033d6358b8ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade2068d985d903dea06d586fcb3cfb03"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_guard.html#ade2068d985d903dea06d586fcb3cfb03">isLocked</a> () const</td></tr>
<tr class="memdesc:ade2068d985d903dea06d586fcb3cfb03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the mutex was actually locked.  <a href="#ade2068d985d903dea06d586fcb3cfb03">More...</a><br /></td></tr>
<tr class="separator:ade2068d985d903dea06d586fcb3cfb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Automatic guard class for mutex (<a class="el" href="classts_1_1_mutex_interface.html" title="Interface class for mutex objects. ">ts::MutexInterface</a>). </p>
<p>This class implements the <em>guard</em> design pattern for mutex, as defined by <a class="el" href="classts_1_1_mutex_interface.html" title="Interface class for mutex objects. ">ts::MutexInterface</a>.</p>
<p>The common pitfall in the usage of resources which must be explicitly released after having been acquired is the absence of release. This can be an omission in the code (no invocation of <code>release()</code> at all) or a premature exit from the code sequence between the acquire and release operations (exception or <code>return</code> statement).</p>
<p>Example: </p><div class="fragment"><div class="line">Mutex mutex;</div><div class="line">...</div><div class="line">mutex.acquire();</div><div class="line">...</div><div class="line"><span class="comment">// some exception occurs here and release() is never invoked.</span></div><div class="line">...</div><div class="line">mutex.release();</div></div><!-- fragment --><p>The <em>guard</em> design pattern mitigates this risk. Each critical sequence is a code block. Within the code block, an ancillary object, the <em>guard</em>, is created and refers to the common mutex object. The constructor of the guard automatically acquires the mutex and its destructor automatically releases the mutex.</p>
<p>There is no need for an explicit release of the mutex. If there is an exception or a premature exit of the code block, the C++ language guarantees that the destructor of the guard will be invoked and that the mutex will be released in all cases.</p>
<p>Example: </p><div class="fragment"><div class="line">Mutex mutex;</div><div class="line">...</div><div class="line">{</div><div class="line">    MutexGuard guard (mutex); <span class="comment">// mutex acquired</span></div><div class="line">    ...</div><div class="line">    <span class="comment">// some exception occurs here, no problem, don&#39;t worry</span></div><div class="line">    ...</div><div class="line">} <span class="comment">// guard&#39;s destructor invoked, mutex always released</span></div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a806d3566ffd3aaae9b22e0be92551041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a806d3566ffd3aaae9b22e0be92551041">&#9670;&nbsp;</a></span>Guard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ts::Guard::Guard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classts_1_1_mutex_interface.html">MutexInterface</a> &amp;&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacets.html#a2c690abc5d90fe5ba7c3ec0237afc348">MilliSecond</a>&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="namespacets.html#a6b91ccf90475c62f610ea549f69d8544">Infinite</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor, automatically acquire the mutex with a timeout. </p>
<p>Unlike the other constructor (the one without timeout), there is no guarantee that the mutex is locked after construction. The user has to invoke <a class="el" href="classts_1_1_guard.html#ade2068d985d903dea06d586fcb3cfb03" title="Check if the mutex was actually locked. ">isLocked()</a> to check that the mutex was actually acquired before the timeout expired.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">mutex</td><td>A reference on the mutex object to acquire. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Maximum number of milliseconds to wait for the mutex. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classts_1_1_guard_1_1_guard_error.html" title="Fatal low-level mutex guard error. ">ts::Guard::GuardError</a></td><td>Thrown whenever an error occurs during the acquisition of the mutex. Exceeding the timeout is not error, the object is successfully constructed but <a class="el" href="classts_1_1_guard.html#ade2068d985d903dea06d586fcb3cfb03" title="Check if the mutex was actually locked. ">isLocked()</a> will return false. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1a929b28bcd8908d3ab033d6358b8ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a929b28bcd8908d3ab033d6358b8ca3">&#9670;&nbsp;</a></span>~Guard()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ts::Guard::~Guard </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor, automatically release the mutex. </p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classts_1_1_guard_1_1_guard_error.html" title="Fatal low-level mutex guard error. ">ts::Guard::GuardError</a></td><td>Thrown whenever an error occurs during the release of the mutex, i.e. when <a class="el" href="classts_1_1_mutex_interface.html#a50c2fd01b9bad58900f6978df26dbdf3" title="Release the mutex. ">ts::MutexInterface::release()</a> returns false. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ade2068d985d903dea06d586fcb3cfb03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade2068d985d903dea06d586fcb3cfb03">&#9670;&nbsp;</a></span>isLocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ts::Guard::isLocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the mutex was actually locked. </p>
<p>This method is useful only with the object was constructed with a timeout. When the constructor without timeout was used, this method always return true.</p>
<dl class="section return"><dt>Returns</dt><dd>True if the mutex was successfully acquired and false if the timeout expired. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ts_guard_8h.html">tsGuard.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
</body>
</html>
