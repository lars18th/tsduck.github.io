<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TSDuck: Building TSDuck</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxy-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img src="tsduck-32.png"/></td>
   <td id="projectalign"><span id="projectname">TSDuck</span>
    <span id="projectnumber">Version 3.0</span>
    <span id="projectbrief">(TSDuck - The MPEG Transport Stream Toolkit)</span>
   </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('building.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Building TSDuck </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#buildreq">Pre-requisistes: build tools</a><ul><li class="level2"><a href="#reqwindows">Windows</a></li>
<li class="level2"><a href="#reqfedora">Fedora</a></li>
<li class="level2"><a href="#reqrhel">Red Hat Entreprise Linux, CentOS</a></li>
<li class="level2"><a href="#requbuntu">Ubuntu</a></li>
<li class="level2"><a href="#reqlinux">All Linux distros</a></li>
<li class="level2"><a href="#reqmac">MacOS</a></li>
</ul>
</li>
<li class="level1"><a href="#buildbin">Building the TSDuck binaries</a><ul><li class="level2"><a href="#buildwindows">Windows</a></li>
<li class="level2"><a href="#buildlinux">Linux and MacOS</a></li>
</ul>
</li>
<li class="level1"><a href="#buildinst">Building the TSDuck installers</a><ul><li class="level2"><a href="#instwindows">Windows</a></li>
<li class="level2"><a href="#instrhel">Fedora, CentOS, Red Hat Entreprise Linux</a></li>
<li class="level2"><a href="#instubuntu">Ubuntu</a></li>
<li class="level2"><a href="#instfiles">Installer files</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>TSDuck can be built on Windows, Linux and MacOS.</p>
<p>Support for Dektec devices and DVB tuners is implemented only on Windows and Linux. MacOS can only support files and IP for TS input and output.</p>
<h1><a class="anchor" id="buildreq"></a>
Pre-requisistes: build tools</h1>
<h2><a class="anchor" id="reqwindows"></a>
Windows</h2>
<ul>
<li>Visual Studio 2017 Community Edition. This is the free version of Visual Studio. If can be downloaded <a href="https://www.visualstudio.com/downloads/">here</a>. This link allows the download of the latest version of Visual Studio but offers no way to download a specific previous version.</li>
<li>CppUnit binary libraries. Download <a href="https://sourceforge.net/projects/cppunit-msvc/files/">here</a>.</li>
<li>Doxygen for Windows. Download <a href="http://www.doxygen.org/download.html">here</a>.</li>
<li>Graphviz for Windows (used by Doxygen to generate graphs and diagrams). Download <a href="http://www.graphviz.org/Download_windows.php">here</a>.</li>
<li>NSIS, the NullSoft Scriptable Install System. Download <a href="http://nsis.sourceforge.net/Download">here</a>. Note that TSDuck is usually built with <a href="https://sourceforge.net/projects/nsis/files/NSIS%202/2.46/nsis-2.46-setup.exe/download">NSIS Version 2.46</a>.</li>
<li>Optional Dektec Windows SDK (DTAPI): Execute the PowerShell script <code>dektec\Download-Install-Dtapi.ps1</code>. It downloads and installs the Dektec Windows SDK from the Dektec site. Alternatively, you may download it <a href="http://www.dektec.com/products/SDK/DTAPI/Downloads/WinSDK.zip">here</a>. TSDuck project files will detect DTAPI automatically. See the Visual Studio property file <code>build\msvc2017\msvc-use-dtapi.props</code> for details.</li>
</ul>
<h2><a class="anchor" id="reqfedora"></a>
Fedora</h2>
<ul>
<li>Setup for a TSDuck native build: <div class="fragment"><div class="line">dnf install gcc-c++ doxygen graphviz pcsc-tools pcsc-lite-devel cppunit-devel</div></div><!-- fragment --></li>
<li>Setup to build 32-bit TSDuck on 64-bit system (command <code>make m32</code>): <div class="fragment"><div class="line">dnf install glibc-devel.i686 libstdc++-devel.i686 pcsc-lite-devel.i686 cppunit-devel.i686</div></div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="reqrhel"></a>
Red Hat Entreprise Linux, CentOS</h2>
<ul>
<li>Same as Fedora but use command <code>yum</code> instead of <code>dnf</code>.</li>
</ul>
<h2><a class="anchor" id="requbuntu"></a>
Ubuntu</h2>
<ul>
<li>Setup for a TSDuck native build: <div class="fragment"><div class="line">apt-get install g++ doxygen graphviz pcscd libpcsclite-dev libcppunit-dev</div></div><!-- fragment --></li>
<li>Setup to build 32-bit TSDuck on 64-bit system (command <code>make m32</code>), start with: <div class="fragment"><div class="line">apt-get install gcc-multilib g++-multilib</div></div><!-- fragment --> However, there is no 32-bit cross-compiled package for pcsc and cppunit on Ubuntu 64-bit. To build a 32-bit TSDuck on Ubuntu 64-bit, first force the installation of the 32-bit native (not cross-compiled) 32-bit versions: <div class="fragment"><div class="line">apt-get install libpcsclite-dev:i386 libcppunit-dev:i386</div></div><!-- fragment --> Then build TSDuck (<code>make m32</code>). But you can no longer rebuild a 64-bit version since the native libraries for pcsc and cppunit were over-written. So, you need to reinstall the native 64-bit versions: <div class="fragment"><div class="line">apt-get install libpcsclite-dev libcppunit-dev</div></div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="reqlinux"></a>
All Linux distros</h2>
<ul>
<li>Optional Dektec DTAPI: The command <code>make</code> at the top level will automatically download the LinuxSDK from the Dektec site. See <code>dektec/Makefile</code> for details.</li>
</ul>
<h2><a class="anchor" id="reqmac"></a>
MacOS</h2>
<ul>
<li>Install Xcode and its command line utilities.</li>
<li>To install additional tools from HomeBrew: <div class="fragment"><div class="line">brew install pcsc-lite cppunit doxygen graphviz gnu-sed grep</div></div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="buildbin"></a>
Building the TSDuck binaries</h1>
<h2><a class="anchor" id="buildwindows"></a>
Windows</h2>
<p>Execute the PowerShell script <code>build\Build.ps1</code>. The TSDuck binaries, executables and DLL's, are built in directories <code>msvc2017\Release-Win32</code> and <code>msvc2017\Release-x64</code> for 32-bit and 64-bit platforms respectively.</p>
<h2><a class="anchor" id="buildlinux"></a>
Linux and MacOS</h2>
<p>Execute the command <code>make</code> at top level. The TSDuck binaries, executables and shared objects (<code>.so</code>), are built in the <code>src</code> directory tree in subdirectories <code>release-i386</code> and <code>release-x86_64</code> for 32-bit and 64-bit platforms respectively.</p>
<p>To build a 32-bit version of TSDuck on a 64-bit system, execute the command <code>make m32</code>.</p>
<h1><a class="anchor" id="buildinst"></a>
Building the TSDuck installers</h1>
<p>There is no need to build the TSDuck binaries before building the installers. Building the binaries, when necessary, is part of the installer build.</p>
<p>All installation packages are dropped into the subdirectory <code>installers</code>. The packages are not deleted by the cleanup procedures. They are not pushed into the git repository either.</p>
<h2><a class="anchor" id="instwindows"></a>
Windows</h2>
<p>Execute the PowerShell script <code>build\Build-Installer.ps1</code>. Two installers are built, for 32-bit and 64-bit systems respectively.</p>
<h2><a class="anchor" id="instrhel"></a>
Fedora, CentOS, Red Hat Entreprise Linux</h2>
<p>Execute the command <code>make rpm</code> at top level to build a <code>.rpm</code> package for the same architecture as the build system. On 64-bit systems, execute the command <code>make rpm32</code> to build a 32-bit package.</p>
<h2><a class="anchor" id="instubuntu"></a>
Ubuntu</h2>
<p>Execute the command <code>make deb</code> at top level to build a <code>.deb</code> package for the same architecture as the build system.</p>
<h2><a class="anchor" id="instfiles"></a>
Installer files</h2>
<p>The following table summarizes the packages which are built and dropped into the <code>installers</code> directory, through a few examples, assuming that the current version of TSDuck is 3.0.</p>
<table class="doxtable">
<tr>
<th>File name </th><th>Description  </th></tr>
<tr>
<td>TSDduck-3.0-src.zip </td><td>Source archive on Windows </td></tr>
<tr>
<td>tsduck-3.0.tgz </td><td>Source archive on Linux and MacOS </td></tr>
<tr>
<td>tsduck_3.0_amd64.deb </td><td>Binary package for 64-bit Ubuntu </td></tr>
<tr>
<td>tsduck-3.0-0.el7.i386.rpm </td><td>Binary package for 32-bit Red Hat or CentOS 7.x </td></tr>
<tr>
<td>tsduck-3.0-0.el7.x86_64.rpm </td><td>Binary package for 64-bit Red Hat or CentOS 7.x </td></tr>
<tr>
<td>tsduck-3.0-0.el7.src.rpm </td><td>Source package for Red Hat or CentOS 7.x </td></tr>
<tr>
<td>tsduck-3.0-0.fc25.i386.rpm </td><td>Binary package for 32-bit Fedora 25 </td></tr>
<tr>
<td>tsduck-3.0-0.fc25.x86_64.rpm </td><td>Binary package for 64-bit Fedora 25 </td></tr>
<tr>
<td>tsduck-3.0-0.fc25.src.rpm </td><td>Source package for Fedora 25 </td></tr>
<tr>
<td>tsduck-devel-3.0-0.el7.i386.rpm </td><td>Development package for 32-bit Red Hat or CentOS 7.x </td></tr>
<tr>
<td>tsduck-devel-3.0-0.el7.x86_64.rpm </td><td>Development package for 64-bit Red Hat or CentOS 7.x </td></tr>
<tr>
<td>tsduck-devel-3.0-0.fc25.i386.rpm </td><td>Development package for 32-bit Fedora 25 </td></tr>
<tr>
<td>tsduck-devel-3.0-0.fc25.x86_64.rpm </td><td>Development package for 64-bit Fedora 25 </td></tr>
<tr>
<td>TSDuck-Win32-3.0.exe </td><td>Binary package for 32-bit Windows </td></tr>
<tr>
<td>TSDuck-Win64-3.0.exe </td><td>Binary package for 64-bit Windows </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
</body>
</html>
