<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TSDuck: ts::SinkFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxy-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img src="tsduck-32.png"/></td>
   <td id="projectalign"><span id="projectname">TSDuck</span>
    <span id="projectnumber">Version 3.11-710</span>
    <span id="projectbrief">(TSDuck - The MPEG Transport Stream Toolkit)</span>
   </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classts_1_1_sink_filter.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classts_1_1_sink_filter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ts::SinkFilter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The DirectShow sink filter (Windows-specific).  
 <a href="classts_1_1_sink_filter.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ts::SinkFilter:</div>
<div class="dyncontent">
<div class="center"><img src="classts_1_1_sink_filter__inherit__graph.png" border="0" usemap="#ts_1_1_sink_filter_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ts::SinkFilter:</div>
<div class="dyncontent">
<div class="center"><img src="classts_1_1_sink_filter__coll__graph.png" border="0" usemap="#ts_1_1_sink_filter_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9e0d2fdc3b527520d401c8d47d8a9251"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_sink_filter.html#a9e0d2fdc3b527520d401c8d47d8a9251">SinkFilter</a> (<a class="el" href="classts_1_1_report.html">Report</a> &amp;report)</td></tr>
<tr class="memdesc:a9e0d2fdc3b527520d401c8d47d8a9251"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a9e0d2fdc3b527520d401c8d47d8a9251">More...</a><br /></td></tr>
<tr class="separator:a9e0d2fdc3b527520d401c8d47d8a9251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3051a3cfe754d326b94bd5fe061ffbc2"><td class="memItemLeft" align="right" valign="top"><a id="a3051a3cfe754d326b94bd5fe061ffbc2"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_sink_filter.html#a3051a3cfe754d326b94bd5fe061ffbc2">~SinkFilter</a> ()</td></tr>
<tr class="memdesc:a3051a3cfe754d326b94bd5fe061ffbc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a3051a3cfe754d326b94bd5fe061ffbc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab920ca266ef41140c46eada1f161d1a"><td class="memItemLeft" align="right" valign="top"><a id="aab920ca266ef41140c46eada1f161d1a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_sink_filter.html#aab920ca266ef41140c46eada1f161d1a">Flush</a> ()</td></tr>
<tr class="memdesc:aab920ca266ef41140c46eada1f161d1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discard and release all pending media samples. <br /></td></tr>
<tr class="separator:aab920ca266ef41140c46eada1f161d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbdebb738b3fc6e95eefd098d34d52d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classts_1_1_sink_pin.html">SinkPin</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_sink_filter.html#afbdebb738b3fc6e95eefd098d34d52d7">GetPin</a> ()</td></tr>
<tr class="memdesc:afbdebb738b3fc6e95eefd098d34d52d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the unique input pin.  <a href="#afbdebb738b3fc6e95eefd098d34d52d7">More...</a><br /></td></tr>
<tr class="separator:afbdebb738b3fc6e95eefd098d34d52d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d6606d3212d640323073a1ae7ddb0f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_sink_filter.html#a20d6606d3212d640323073a1ae7ddb0f">Read</a> (void *buffer, size_t buffer_size, <a class="el" href="namespacets.html#a2c690abc5d90fe5ba7c3ec0237afc348">MilliSecond</a> timeout=<a class="el" href="namespacets.html#a6b91ccf90475c62f610ea549f69d8544">Infinite</a>)</td></tr>
<tr class="memdesc:a20d6606d3212d640323073a1ae7ddb0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from transport stream.  <a href="#a20d6606d3212d640323073a1ae7ddb0f">More...</a><br /></td></tr>
<tr class="separator:a20d6606d3212d640323073a1ae7ddb0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a419622e2e7c607e22cb436d857fb5876"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classts_1_1_sink_filter.html#a419622e2e7c607e22cb436d857fb5876">SetMaxMessages</a> (size_t maxMessages)</td></tr>
<tr class="memdesc:a419622e2e7c607e22cb436d857fb5876"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the max number of media samples in the queue between the graph thread and the application thread.  <a href="#a419622e2e7c607e22cb436d857fb5876">More...</a><br /></td></tr>
<tr class="separator:a419622e2e7c607e22cb436d857fb5876"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The DirectShow sink filter (Windows-specific). </p>
<p>This class implements a DirectShow filter.</p>
<p>DirectShow is a very complicated infrastructure on Windows to support various media processing. BDA (Broadcast Device Architecture) is the generic device driver interface which links "broadcast devices" like DVB receivers to DirectShow. DirectShow is consequently the only generic way to interact with any type of DVB receiver hardware, provided that the hardware vendor supplies BDA-compatible drivers for the device.</p>
<p>The "sink filter" is intended to be used after a DirectShow capture filter, as provided by the hardware vendor. We call it a "sink" filter because it has one input pin (for MPEG-2 TS) but no output pin. The TS "samples" are read asynchronously by the application. This filter acts as an adapter between the push model of DirectShow and the pull model of tsp, the transport stream processor.</p>
<p>This module contains several classes:</p>
<ul>
<li><a class="el" href="classts_1_1_sink_filter.html" title="The DirectShow sink filter (Windows-specific). ">SinkFilter</a> : The DirectShow filter</li>
<li><a class="el" href="classts_1_1_sink_pin.html" title="SinkPin, input pin for SinkFilter (Windows-specific). ">SinkPin</a> : Input pin for <a class="el" href="classts_1_1_sink_filter.html" title="The DirectShow sink filter (Windows-specific). ">SinkFilter</a></li>
<li><a class="el" href="classts_1_1_sink_enum_media_types.html" title="SinkEnumMediaTypes, enumerator returned by ::IPin::EnumMediaTypes (Windows-specific). ">SinkEnumMediaTypes</a> : Enumerator returned by IPin::EnumMediaTypes</li>
<li><a class="el" href="classts_1_1_sink_enum_pins.html" title="SinkEnumPins, enumerator returned by ::IBaseFilter::EnumPins (Windows-specific). ">SinkEnumPins</a> : Enumerator returned by IBaseFilter::EnumPins</li>
</ul>
<p>The <a class="el" href="classts_1_1_sink_pin.html" title="SinkPin, input pin for SinkFilter (Windows-specific). ">SinkPin</a> accepts only MPEG-2 transport streams:</p>
<ul>
<li>Major type : MEDIATYPE_Stream</li>
<li>Subtype : MEDIASUBTYPE_MPEG2_TRANSPORT MEDIASUBTYPE_MPEG2_TRANSPORT_STRIDE KSDATAFORMAT_SUBTYPE_BDA_MPEG2_TRANSPORT </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9e0d2fdc3b527520d401c8d47d8a9251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e0d2fdc3b527520d401c8d47d8a9251">&#9670;&nbsp;</a></span>SinkFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ts::SinkFilter::SinkFilter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classts_1_1_report.html">Report</a> &amp;&#160;</td>
          <td class="paramname"><em>report</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">report</td><td>Where to report errors. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afbdebb738b3fc6e95eefd098d34d52d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbdebb738b3fc6e95eefd098d34d52d7">&#9670;&nbsp;</a></span>GetPin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classts_1_1_sink_pin.html">SinkPin</a>* ts::SinkFilter::GetPin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the unique input pin. </p>
<dl class="section return"><dt>Returns</dt><dd>The unique input pin of the filter. The returned object has one reference for the caller. Use Release() when no longer needed. </dd></dl>

</div>
</div>
<a id="a419622e2e7c607e22cb436d857fb5876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a419622e2e7c607e22cb436d857fb5876">&#9670;&nbsp;</a></span>SetMaxMessages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ts::SinkFilter::SetMaxMessages </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxMessages</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the max number of media samples in the queue between the graph thread and the application thread. </p>
<p>Must be called when the graph is stopped or paused. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">maxMessages</td><td>Max number of media samples in the queue between the graph thread and the application thread. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20d6606d3212d640323073a1ae7ddb0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d6606d3212d640323073a1ae7ddb0f">&#9670;&nbsp;</a></span>Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ts::SinkFilter::Read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacets.html#a2c690abc5d90fe5ba7c3ec0237afc348">MilliSecond</a>&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="namespacets.html#a6b91ccf90475c62f610ea549f69d8544">Infinite</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data from transport stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>Address of returned TS packet buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_size</td><td>Size in bytes of the <em>buffer</em>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Read timeout in milliseconds. If timeout is not infinite and no packet has been read within this timeout, return zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size in bytes of the data returned in buffer. Always return a multiple of 188, complete TS packets. Return zero on error or end of stream. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ts_sink_filter_8h.html">tsSinkFilter.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.12-->
<!-- start footer part -->
</body>
</html>
